<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>外卖点餐系统（完整修复版）</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- 登录注册容器 -->
    <div id="loginRegisterContainer" class="login-register-container">
        <div class="login-register-card">
            <div class="tab-header">
                <div id="loginTab" class="tab active">登录</div>
                <div id="registerTab" class="tab">注册</div>
            </div>
            <!-- 登录表单 -->
            <form id="loginForm" class="form">
                <div class="form-item">
                    <label>账号</label>
                    <input type="text" id="loginAccount" placeholder="请输入账号">
                </div>
                <div class="form-item">
                    <label>密码</label>
                    <input type="password" id="loginPwd" placeholder="请输入密码">
                </div>
                <div class="form-item">
                    <label>角色</label>
                    <div class="role-radio">
                        <input type="radio" name="loginRole" value="consumer" checked> 消费者
                        <input type="radio" name="loginRole" value="admin"> 管理员
                    </div>
                </div>
                <button type="button" id="loginBtn" class="submit-btn">登录</button>
            </form>
            <!-- 注册表单 -->
            <form id="registerForm" class="form" style="display: none;">
                <div class="form-item">
                    <label>账号</label>
                    <input type="text" id="regAccount" placeholder="请输入账号">
                </div>
                <div class="form-item">
                    <label>密码</label>
                    <input type="password" id="regPwd" placeholder="请输入密码">
                </div>
                <div class="form-item">
                    <label>确认密码</label>
                    <input type="password" id="regPwdConfirm" placeholder="请再次输入密码">
                </div>
                <div class="form-item">
                    <label>角色</label>
                    <div class="role-radio">
                        <input type="radio" name="regRole" value="consumer" checked> 消费者
                        <input type="radio" name="regRole" value="admin"> 管理员
                    </div>
                </div>
                <button type="button" id="registerBtn" class="submit-btn">注册</button>
            </form>
        </div>
    </div>

    <!-- 主系统容器 -->
    <div id="mainSystem" class="main-system">
        <!-- 导航栏 -->
        <nav class="nav">
            <div class="nav-link active" data-page="home">首页</div>
            <div class="nav-link" data-page="dish">菜品</div>
            <div class="nav-link" data-page="cart">购物车</div>
            <div class="nav-link" data-page="order">我的订单</div>
            <div class="nav-link" data-page="userCenter">个人中心</div>
            <div class="nav-link" data-page="coupon">优惠券</div>
        </nav>

        <!-- 首页 -->
        <div id="homePage" class="page" style="display: block;">
            <div class="page-title">欢迎使用外卖点餐系统</div>
            <!-- 配送方式选择 -->
            <div class="delivery-mode">
                <div id="takeawayCard" class="delivery-card active" data-mode="takeaway">
                    <h3>外卖配送</h3>
                    <p>配送到家，足不出户</p>
                </div>
                <div id="selfPickCard" class="delivery-card" data-mode="selfPick">
                    <h3>门店自提</h3>
                    <p>到店自取，立减打包费</p>
                </div>
            </div>
            <!-- 热门门店 -->
            <div class="section">
                <h3 class="section-title">热门门店</h3>
                <div class="store-list">
                    <div class="hot-store-card" data-store="shaxian">
                        <div class="store-name">沙县小吃</div>
                        <div class="store-desc">经典闽菜，鲜香可口</div>
                    </div>
                    <div class="hot-store-card" data-store="luosifen">
                        <div class="store-name">螺蛳粉</div>
                        <div class="store-desc">鲜香麻辣，回味无穷</div>
                    </div>
                    <div class="hot-store-card" data-store="burgerKing">
                        <div class="store-name">汉堡王</div>
                        <div class="store-desc">美式快餐，饱腹感十足</div>
                    </div>
                </div>
            </div>
            <!-- 全部门店 -->
            <div class="section">
                <h3 class="section-title">全部门店</h3>
                <div class="store-list">
                    <div class="store-card" data-store="shaxian">沙县小吃</div>
                    <div class="store-card" data-store="luosifen">螺蛳粉</div>
                    <div class="store-card" data-store="homecook">家常大众菜</div>
                    <div class="store-card" data-store="eggRice">滑蛋饭</div>
                    <div class="store-card" data-store="burgerKing">汉堡王</div>
                    <div class="store-card" data-store="baozai">煲仔饭</div>
                    <div class="store-card" data-store="fruit">水果摊</div>
                </div>
            </div>
        </div>

        <!-- 菜品页 -->
        <div id="dishPage" class="page" style="display: none;">
            <div class="page-title">菜品列表</div>
            <div class="dish-filter">
                <label>门店筛选：</label>
                <select id="storeFilterSelect">
                    <option value="all">全部门店</option>
                    <option value="shaxian">沙县小吃</option>
                    <option value="luosifen">螺蛳粉</option>
                    <option value="homecook">家常大众菜</option>
                    <option value="eggRice">滑蛋饭</option>
                    <option value="burgerKing">汉堡王</option>
                    <option value="baozai">煲仔饭</option>
                    <option value="fruit">水果摊</option>
                </select>
            </div>
            <div id="dishList" class="dish-list"></div>
        </div>

        <!-- 购物车页 -->
        <div id="cartPage" class="page" style="display: none;">
            <div class="page-title">我的购物车</div>
            <!-- 优惠券选择区域 -->
            <div class="coupon-select-area">
                <div class="coupon-item">
                    <input type="checkbox" id="couponUseCheckbox">
                    <label for="couponUseCheckbox">是否使用优惠券</label>
                </div>
                <div class="coupon-item">
                    <label>选择优惠券：</label>
                    <select id="couponSelect" disabled></select>
                </div>
                <div id="couponTip" class="coupon-tip">未使用优惠券，可勾选使用！</div>
                <div id="discountAmount" class="discount-amount">优惠金额：-¥0.00</div>
            </div>
            <!-- 购物车表格 -->
            <table class="cart-table">
                <thead>
                    <tr>
                        <th>商品图片</th>
                        <th>商品名称</th>
                        <th>所属门店</th>
                        <th>单价</th>
                        <th>数量</th>
                        <th>额外费用</th>
                        <th>小计</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody id="cartTableBody"></tbody>
            </table>
            <!-- 购物车汇总 -->
            <div class="cart-summary">
                <div class="summary-item">
                    <span>商品总价：</span>
                    <span id="goodsTotal">¥0.00</span>
                </div>
                <div class="summary-item">
                    <span>总额外费用：</span>
                    <span id="totalExtraFee">¥0.00</span>
                </div>
                <div class="summary-item">
                    <span id="discountAmountShow" class="discount-show">优惠金额：-¥0.00</span>
                </div>
                <div class="summary-item total">
                    <span>订单总价：</span>
                    <span id="orderTotal">¥0.00</span>
                </div>
                <button id="settleBtn" class="settle-btn">结算订单</button>
            </div>
        </div>

        <!-- 我的订单页 -->
        <div id="orderPage" class="page" style="display: none;">
            <div class="page-title">我的订单</div>
            <table class="order-table">
                <thead>
                    <tr>
                        <th>订单编号</th>
                        <th>商品详情</th>
                        <th>支付金额</th>
                        <th>配送方式</th>
                        <th>订单状态</th>
                        <th>创建时间</th>
                    </tr>
                </thead>
                <tbody id="orderTableBody"></tbody>
            </table>
        </div>

        <!-- 个人中心页 -->
        <div id="userCenterPage" class="page" style="display: none;">
            <div class="page-title">个人中心</div>
            <div class="user-info">
                <div class="user-info-item">
                    <span>账号：</span>
                    <span id="userAccount">未登录</span>
                </div>
                <div class="user-info-item">
                    <span>角色：</span>
                    <span id="userRole">未知</span>
                </div>
                <div class="user-info-item">
                    <span>收货地址：</span>
                    <span id="userAddress">未设置</span>
                </div>
                <button id="editAddressBtn" class="edit-address-btn">编辑地址</button>
            </div>
            <!-- 修改密码 -->
            <div class="change-pwd">
                <h3 class="section-title">修改密码</h3>
                <div class="form-item">
                    <label>原密码：</label>
                    <input type="password" id="oldPwd" placeholder="请输入原密码">
                </div>
                <div class="form-item">
                    <label>新密码：</label>
                    <input type="password" id="newPwd" placeholder="请输入新密码">
                </div>
                <div class="form-item">
                    <label>确认新密码：</label>
                    <input type="password" id="confirmNewPwd" placeholder="请再次输入新密码">
                </div>
                <button id="changePwdBtn" class="change-pwd-btn">修改密码</button>
            </div>
            <!-- 退出登录 -->
            <button id="logoutBtn" class="logout-btn">退出登录</button>

            <!-- 地址编辑弹窗 -->
            <div id="addressModal" class="modal" style="display: none;">
                <div class="modal-content">
                    <h3>编辑收货地址</h3>
                    <div class="form-item">
                        <label>收货人：</label>
                        <input type="text" id="receiverName" placeholder="请输入收货人姓名">
                    </div>
                    <div class="form-item">
                        <label>手机号码：</label>
                        <input type="text" id="receiverPhone" placeholder="请输入11位手机号码">
                    </div>
                    <div class="form-item">
                        <label>详细地址：</label>
                        <input type="text" id="receiverDetailAddress" placeholder="请输入详细收货地址">
                    </div>
                    <div class="modal-btn-group">
                        <button id="saveAddressBtn" class="save-btn">保存</button>
                        <button id="cancelAddressBtn" class="cancel-btn">取消</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 优惠券页 -->
        <div id="couponPage" class="page" style="display: none;">
            <div class="page-title">我的优惠券</div>
            <!-- 首张优惠券 -->
            <div id="firstLoginCoupon" class="coupon-card">
                <div class="coupon-name">5元无门槛通用券</div>
                <div class="coupon-desc">首次登录专属，无门槛使用</div>
                <button id="receiveCouponBtn" class="receive-coupon-btn">立即领取</button>
                <div id="couponStatus" class="coupon-status" style="display: none;">已领取</div>
            </div>
            <!-- 其他优惠券 -->
            <div class="coupon-list">
                <div class="coupon-card">
                    <div class="coupon-name">10元满30可用券</div>
                    <div class="coupon-desc">订单满30元即可使用</div>
                    <button class="receive-coupon-btn">立即领取</button>
                    <div class="coupon-status" style="display: none;">已领取</div>
                </div>
                <div class="coupon-card">
                    <div class="coupon-name">8元满20可用券</div>
                    <div class="coupon-desc">订单满20元即可使用</div>
                    <button class="receive-coupon-btn">立即领取</button>
                    <div class="coupon-status" style="display: none;">已领取</div>
                </div>
                <div class="coupon-card">
                    <div class="coupon-name">3元无门槛券</div>
                    <div class="coupon-desc">无门槛使用，全场通用</div>
                    <button class="receive-coupon-btn">立即领取</button>
                    <div class="coupon-status" style="display: none;">已领取</div>
                </div>
            </div>
        </div>

        <!-- 底部购物栏 -->
        <div id="bottomCartBar" class="bottom-cart-bar" style="display: none;">
            <div class="cart-count">购物车(<span id="cartCount">0</span>)</div>
            <div class="final-total">合计：<span id="finalTotalPrice">¥0.00</span></div>
            <div class="go-cart-btn" onclick="document.querySelector('.nav-link[data-page=cart]').click()">去结算</div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>